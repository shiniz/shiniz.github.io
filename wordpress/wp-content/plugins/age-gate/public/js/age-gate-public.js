!function(e,t){"use strict";function o(){this.age=t.a,this.required=t.r,this.rememberName="ageCookieRemember",this.body=document.getElementsByTagName("body")[0],this.title=document.title,this.classes=this.body.className,t.under=this.checkUnder(),navigator.userAgent.match(/bot|crawl|slurp|spider|facebookexternalhit|Facebot|Twitterbot/i)||this.checkSession()||this.verifyUser()}o.prototype.verifyUser=function(){this.checkRemember()?this.setSession():this.required&&(this.body.className="age-restriction",this.hideContent(),this.showGateway())},o.prototype.hideContent=function(){t.update_title&&(document.title=t.ti||"Age Verification"),this.allNodes=this.body.childNodes;for(var e=0;e<this.allNodes.length;e++)this.allNodes[e].tagName&&"script"!==this.allNodes[e].nodeName.toLowerCase()&&(this.allNodes[e].style.display="none")},o.prototype.showGateway=function(){e("script[type='text/twig']").each(function(){var t=e(this).attr("id"),o=e(this).text();Twig.twig({id:t,data:o,allowInlineIncludes:!0})});var o=Twig.twig({ref:"tmpl-wp-age-gate"}).render(t),r=document.createElement("div"),i=o;r.className="age-gate-wrapper",r.innerHTML=i,this.body.appendChild(r),"buttons"===t.t?this.buttonSubmit():this.formSubmit()},o.prototype.buttonSubmit=function(){for(var e=document.querySelectorAll(".age-gate-wrapper .age-gate-form button"),t=this,o=0;o<e.length;o++)e[o].addEventListener("click",function(e){e.preventDefault(),"yes"===e.target.value?t.passCheck():t.showError(2)})},o.prototype.formSubmit=function(){var e=document.querySelector(".age-gate-wrapper .age-gate-form"),o=this;e.addEventListener("submit",function(e){e.preventDefault();var r=document.getElementById("dob-day").value,i=document.getElementById("dob-month").value,n=document.getElementById("dob-year").value;return o.validateInput(r,i,n)?o.checkAge(r,i,n)<t.a?(o.showError(2),!1):void o.passCheck():(o.showError(1),!1)})},o.prototype.showError=function(e){var o=document.querySelector(".age-gate-form"),r=o.dataset?o.dataset.redirect:o.getAttribute("data-redirect");r&&window.location.replace(r);var i=Twig.twig({ref:"tmpl-wp-age-gate-error"}).render({error:t.errors[e]}),n=document.querySelector(".age-gate-form .error");if(n.innerHTML=i,n.style.display="block",t.nsc){for(var s=o.childNodes,a=0;a<s.length;a++)s[a],s[a].tagName&&"h1"!==s[a].nodeName.toLowerCase()&&"div"!==s[a].nodeName.toLowerCase()&&(s[a].style.display="none");this.setUnder()}},o.prototype.passCheck=function(){var e=document.querySelector('.age-gate-form input[name="remember"]');e&&e.checked&&this.setRemember(),this.setSession(),this.revealContent()},o.prototype.checkSession=function(){return this.readCookie("ageCookie")},o.prototype.setSession=function(){return this.setCookie("ageCookie",1)},o.prototype.checkUnder=function(){return this.readCookie("ageCookieUnder")},o.prototype.setUnder=function(){return this.setCookie("ageCookieUnder",1)},o.prototype.checkAge=function(e,t,o){return moment().diff(moment(o+t+e,"YYYYMMDD"),"years")},o.prototype.setRemember=function(){this.setCookie("ageCookieRemember",1,t.remember_days)},o.prototype.checkRemember=function(){return this.readCookie(this.rememberName)},o.prototype.revealContent=function(){window.location.reload()},o.prototype.readCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var i=o[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},o.prototype.setCookie=function(e,t,o){var r="";if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3),r="; expires="+i.toUTCString()}document.cookie=e+"="+t+r+"; path=/"},o.prototype.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},o.prototype.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},o.prototype.validateInput=function(e,t,o){return!!this.isNumeric(o)&&(4===o.toString().length&&(!!this.isNumeric(t)&&(!(t>12)&&(2===t.toString().length&&(!!this.isNumeric(e)&&(!(e>31)&&2===e.toString().length))))))},o.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};new o}(jQuery,ag);